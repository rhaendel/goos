apply plugin: 'java'
apply plugin: 'eclipse'
apply from: 'gradle/extraTestSourceSets.gradle'

repositories {
    jcenter()
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.4'
}

dependencies {
    compile 'org.igniterealtime.smack:smack:3.2.1'
    testCompile 'junit:junit:4.12'
    testCompile 'org.hamcrest:hamcrest-library:1.3'
    testCompile ('com.googlecode.windowlicker:windowlicker-swing:r268') {
        exclude module: 'hamcrest-all'
    }
    testCompile 'org.igniterealtime.smack:smackx:3.2.1'
}

task ensureSourceFoldersExist() {
    doLast {
        def allSourceDirs = sourceSets.collect{ it.allSource.srcDirs }.flatten()
        allSourceDirs.findAll{ !it.exists() }.each { missingSrcDir ->
            println "creating $missingSrcDir"
            missingSrcDir.mkdirs()
        }
    }
}
eclipseClasspath.dependsOn ensureSourceFoldersExist
